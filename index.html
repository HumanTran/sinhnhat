<!doctype html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<!-- Vietnamese-friendly webfont (with local fallbacks) -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@600;700&display=swap" rel="stylesheet">
	<style>
html, body {
	height: 100%;
	margin: 0;
	overflow: hidden; /* disable page scrolling */
}

/* background using meo.gif placed in d:\kn\assets\meo.gif */
body {
	background-image: url("meo.jpg");
	background-size: cover;
	background-position: center;
	background-repeat: no-repeat;
	background-attachment: fixed;
	background-color: #222; /* fallback */
}

/* centered content */
.center {
	height: 100vh;            /* fill viewport height */
	box-sizing: border-box;   /* include padding inside height */
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	padding: 2rem;
}

/* overlay to increase contrast */
.overlay {
	position: fixed;
	inset: 0;
	/* color adjustment effects removed */
	background: transparent;
	-webkit-backdrop-filter: none;
	backdrop-filter: none;
	pointer-events: none;
	z-index: 0;
}

/* decorative image above background, behind content */
.bg-layer {
	position: fixed;
	inset: 0;                  /* cover full viewport */
	width: 100%;
	height: 100%;
	object-fit: cover;         /* like background-size: cover */
	object-position: center;   /* like background-position: center */
	pointer-events: none;
	z-index: 0;                /* above .overlay, below main content */
	/* smooth rendering for animation */
	image-rendering: auto;
}

/* slow horizontal drift for decorative layers */
.cloud {
	will-change: transform;
	opacity: 1;
	transform: translateZ(0);         /* GPU hint */
	backface-visibility: hidden;      /* reduce flicker */
}
/* legacy individual cloud animations removed in favor of track scrolling */

/* seamless tiling: cloud1 starts at 0%, cloud2 starts at -100% and follows */
@keyframes drift0 {
	0%   { transform: translate3d(0%, 0, 0); }
	100% { transform: translate3d(100%, 0, 0); }
}
@keyframes driftNeg100 {
	0%   { transform: translate3d(-100%, 0, 0); }
	100% { transform: translate3d(0%, 0, 0); }
}

/* scrolling container ensures images never overlap while moving */
.bg-scroll {
	position: fixed;
	inset: 0;
	pointer-events: none;
	z-index: 0; /* above overlay, below content */
	overflow: hidden; /* mask track edges */
}
.bg-track {
	width: 300vw; /* may1 | may2 | may1 clone */
	height: 100vh;
	display: flex;
	will-change: transform;
	transform: translate3d(-200vw, 0, 0); /* start so content moves left->right */
	backface-visibility: hidden;
	animation: trackScroll calc(var(--cloud-duration, 76.8s) * 2) linear infinite;
}
.bg-item {
	flex: 0 0 100vw;
	width: 100vw;
	height: 100vh;
	object-fit: cover;
	object-position: center;
	image-rendering: auto;
}

/* star layer placed above background/cloud track but below main content */
.star-layer {
	position: fixed;
	inset: 0;
	pointer-events: none;
	z-index: 1; /* clouds z-index:0, content sits above */
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: center;
	image-rendering: auto;
	/* subtle twinkle */
	animation: twinkle 20s ease-in-out infinite;
	will-change: opacity;
}

/* irregular twinkle to avoid rhythmic blinking */
@keyframes twinkle {
	0%   { opacity: 0; }
	8%   { opacity: 1; }
	14%  { opacity: 0; }
	22%  { opacity: 1; }
	38%  { opacity: 0; }
	50%  { opacity: 1; }
	63%  { opacity: 0; }
	74%  { opacity: 1; }
	86%  { opacity: 0; }
	100% { opacity: 1; }
}

@keyframes trackScroll {
	0%   { transform: translate3d(-200vw, 0, 0); }
	100% { transform: translate3d(0, 0, 0); } /* sweep rightwards across two slides */
}

/* pixel vars */
:root {
	--px: 4px;
	--ink: #0c0c0c;
	--paper: #efdeaf;       /* slightly brighter, cheerier paper */
	--paper-dark: #d9c389;  /* supporting shade */
	--measure: 20ch;        /* desired text measure before wrapping (restored) */
}

/* image presentation */

/* Envelope image size (2x bigger than previous) */
.envelope-img {
	max-width: calc(min(90vw, 420px) * 0.5);
	height: auto;
	image-rendering: pixelated;
	display: block;
	/* keep envelope effects: gentle vibrancy + soft shadow */
	filter: saturate(1.22) brightness(1.02) contrast(1.06) drop-shadow(0 6px 18px rgba(0,0,0,.36));
	z-index: 1;
	animation: bob 5s ease-in-out infinite;
	transform-origin: 50% 100%;
	will-change: transform;
}

/* ensure [hidden] truly hides even if display set elsewhere */
[hidden] { display: none !important; }

.letter-box {
	margin-top: 1rem;
	display: inline-grid;                 /* grid for content spacing */
	width: fit-content;                 /* shrink to fit text */
	max-width: min(90vw, var(--measure));/* wrap automatically around this width */
	background:
		repeating-linear-gradient(to bottom,
			rgba(0,0,0,0.06) 0 calc(1 * var(--px)),
			transparent calc(1 * var(--px)) calc(4 * var(--px))
		),
		var(--paper);
	color: #141414;
	padding: calc(3 * var(--px));
	border-radius: 0;
	box-shadow:
		0 0 0 var(--px) var(--ink),
		calc(var(--px)) calc(var(--px)) 0 0 var(--ink),
		calc(2 * var(--px)) calc(2 * var(--px)) 0 0 rgba(12,12,12,0.34),
		inset 0 0 0 calc(1 * var(--px)) rgba(0,0,0,0.05),           /* inner edge darken */
		inset 0 20px 30px -20px rgba(60,40,0,0.18),                 /* top vignette (lighter) */
		inset 0 -20px 30px -20px rgba(60,40,0,0.14);                /* bottom vignette (lighter) */
	/* Vietnamese-friendly font stack; tighter line-height per request */
	font: 400 18px/1 "Be Vietnam Pro", "Noto Sans", Roboto, "Segoe UI", Arial, sans-serif;
	line-height: 20px; /* +2px */
	text-align: left;            /* left align text */
	letter-spacing: .2px;
	white-space: normal;               /* let browser wrap automatically */
	overflow-wrap: anywhere;           /* prevent overflow on long tokens */
	image-rendering: pixelated;
	position: relative;
	overflow: visible;           /* allow close button to sit half outside */
	/* appear animation baseline */
	opacity: 0;
	filter: none;
	transition: opacity 220ms ease;
}

/* add vertical breathing room around the text */
.letter-box p { margin: calc(2 * var(--px)) 0; }

.letter-box.show {
	opacity: 1;
	animation: bob 6s ease-in-out infinite;
	transform-origin: 50% 100%;
	will-change: transform;
}

/* close button (pixel style) */
.close-btn {
	position: absolute;       /* straddle the top edge */
	top: 0;
	right: calc(-2.5 * var(--px));
	transform: translateY(-50%); /* 1/2 outside, 1/2 inside vertically */
	/* 15% smaller */
	padding: calc(1.5 * var(--px) * 0.85) calc(3.5 * var(--px) * 0.85);
	background: #c94a4a; /* standout wax red */
	color: #fff;
	border: none;
	cursor: pointer;
	font: 700 13.6px/1 monospace; /* 16px -> 13.6px (-15%) */
	image-rendering: pixelated;
	box-shadow:
		0 0 0 var(--px) var(--ink),                            /* hard outline */
		calc(var(--px)) calc(var(--px)) 0 0 var(--ink),        /* pixel drop */
		inset 0 0 0 var(--px) rgba(255,255,255,0.35);          /* inner highlight */
	z-index: 3;               /* sit above paper overlays */
}

.close-btn:hover { background: #b34141; }
.close-btn:active {
	/* keep the vertical straddle while simulating a 1px press-in */
	transform: translate(var(--px), calc(-50% + var(--px)));
	box-shadow:
		0 0 0 var(--px) var(--ink),
		inset 0 0 0 var(--px) rgba(0,0,0,0.25);
}
.close-btn:focus-visible { outline: 3px solid rgba(255,255,255,0.85); outline-offset: 2px; }

/* subtle one-time pulse when letter appears */
.letter-box.show .close-btn { animation: pulse 680ms steps(6, end) 1; }
@keyframes pulse {
	0% { transform: translateY(-50%) scale(1); }
	50% { transform: translateY(-50%) scale(1.06); }
	100% { transform: translateY(-50%) scale(1); }
}

/* old paper overlays: stains + grain + vignette */
.letter-box::before,
.letter-box::after {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
}

/* gentle bobbing animation */
@keyframes bob {
	0%   { transform: translateY(0) rotate(0deg); }
	50%  { transform: translateY(-4px) rotate(-0.3deg); }
	100% { transform: translateY(0) rotate(0.3deg); }
}

/* respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
	.envelope-img,
	.letter-box.show { animation: none !important; }
}

.letter-box::before {
	background:
		radial-gradient(120% 90% at 0% 0%, rgba(50,30,0,.12), transparent 40%),
		radial-gradient(120% 90% at 100% 0%, rgba(50,30,0,.10), transparent 40%),
		radial-gradient(140% 90% at 50% 120%, rgba(50,30,0,.14), transparent 55%),
		repeating-linear-gradient(0deg, rgba(0,0,0,.02) 0 1px, transparent 1px 2px),
		repeating-linear-gradient(90deg, rgba(0,0,0,.015) 0 1px, transparent 1px 2px);
	mix-blend-mode: multiply;
	opacity: .45; /* lighter to avoid gloomy feel */
}

.letter-box::after {
	background:
		radial-gradient(100px 60px at 18% 32%, rgba(90,60,0,.14), rgba(90,60,0,0) 65%),
		radial-gradient(110px 70px at 82% 68%, rgba(90,60,0,.12), rgba(90,60,0,0) 70%),
		linear-gradient(to bottom, transparent 58%, rgba(60,40,0,.10) 59%, transparent 61%); /* subtle fold */
	mix-blend-mode: multiply;
	opacity: .35; /* lighter */
}

	</style>
</head>
<body>
	<div class="overlay" aria-hidden="true"></div>
	<div class="bg-scroll" aria-hidden="true">
		<div class="bg-track">
			<img src="may1.png" alt="" class="bg-item" aria-hidden="true" />
			<img src="may2.png" alt="" class="bg-item" aria-hidden="true" />
			<img src="may1.png" alt="" class="bg-item" aria-hidden="true" />
		</div>
	</div>
	<img src="star.png" alt="" class="star-layer" aria-hidden="true" />
	<main class="center">
		<img src="envelope.jpg" alt="Envelope" class="envelope-img" role="button" tabindex="0" aria-controls="letter" aria-expanded="false" />
		<div class="letter-box" id="letter" hidden>
			<button type="button" class="close-btn" aria-controls="letter" aria-label="Close letter">√ó</button>
            <p> </p>
			<p>Ch√∫c m·ª´ng sinh nh·∫≠t Ni C√¥ Ch·∫£i T√≥c - Tr·∫ßn Th·ªã C·∫©m H√†</p>
            <p>Ch√∫c H√† tu·ªïi m·ªõi nhi·ªÅu s·ª©c kho·∫ª, h·∫°nh ph√∫c, b√¨nh an, mong H√† s·∫Ω ƒë·∫°t ƒë∆∞·ª£c nh·ªØng mong ∆∞·ªõc c·ªßa b·∫£n th√¢nüåª</p>
            <p> </p>
		</div>
	</main>
	<script>
	(function(){
		const img = document.querySelector('.envelope-img');
		const box = document.getElementById('letter');
		const closeBtn = document.querySelector('.close-btn');
		if(!img || !box || !closeBtn) return;

		function showLetter(){
			if(!box.hasAttribute('hidden')) return;
			box.removeAttribute('hidden');
			img.setAttribute('aria-expanded','true');
			img.setAttribute('hidden','');
			box.setAttribute('tabindex','-1');
			requestAnimationFrame(() => {
				box.classList.add('show');
				try { box.focus({ preventScroll: true }); } catch(_) { box.focus(); }
			});
		}

		function showEnvelope(){
			if(box.hasAttribute('hidden')) return;
			box.classList.remove('show');
			box.setAttribute('hidden','');
			img.removeAttribute('hidden');
			img.setAttribute('aria-expanded','false');
			try { img.focus({ preventScroll: true }); } catch(_) { img.focus(); }
		}

		function onImgKey(e){
			if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); showLetter(); }
		}

		function onBoxKey(e){
			if(e.key === 'Escape'){ e.preventDefault(); showEnvelope(); }
		}

		img.addEventListener('click', showLetter);
		img.addEventListener('keydown', onImgKey);
		closeBtn.addEventListener('click', showEnvelope);
		box.addEventListener('keydown', onBoxKey);


	})();
	</script>
</body>
</html>
